<section class="incidents-container">
  <header class="incidents-header">
    <h2>Gestión de Incidentes</h2>
    <button id="btnAddIncident" class="btn primary">Registrar Incidencia</button>
  </header>

  <table id="incidentsTable" class="styled-table">
    <thead>
      <tr>
        <th data-sort="incident">Incidente</th>
        <th data-sort="type">Tipo</th>
        <th data-sort="priority">Prioridad</th>
        <th data-sort="status">Estado</th>
        <th data-sort="registeredBy">Registrado por</th>
        <th data-sort="registrationDate">Fecha de registro</th>
        <th data-sort="revisionDate">Última actualización</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <!-- Filas dinámicas -->
    </tbody>
  </table>

  <!-- Modal Registrar / Editar -->
  <div id="incidentModal" class="modal hidden">
    <div class="modal-content">
      <header>
        <h3 id="modalTitle">Registrar Incidencia</h3>
        <button class="close-modal">&times;</button>
      </header>
      <form id="incidentForm">
        <label>Viaje 
          <select id="tripSelect" required>
            <option value="">Cargando viajes...</option>
          </select>
        </label>

        <label>Tipo de incidente 
          <select id="typeSelect" required>
            <option value="mechanical">Mecánico</option>
            <option value="electrical">Eléctrico</option>
            <option value="other">Otro</option>
          </select>
        </label>

        <label>Incidente 
          <select id="incidentCodeSelect" required>
            <option value="">Seleccione un incidente</option>
          </select>
        </label>

        <label>Descripción 
          <textarea id="description"></textarea>
        </label>

        <label>Comentarios 
          <textarea id="comments"></textarea>
        </label>

        <label>Incidente relacionado 
          <select id="relatedIncidentSelect">
            <option value="">Ninguno</option>
          </select>
        </label>

        <label>Subir fotos 
          <input type="file" id="photoUpload" multiple accept="image/*">
        </label>
        <div id="photoPreview" class="photo-preview"></div>

        <footer>
          <button type="submit" class="btn primary">Guardar</button>
          <button type="button" class="btn secondary close-modal">Cancelar</button>
        </footer>
      </form>
    </div>
  </div>

  <!-- Modal Ver Detalles -->
  <div id="incidentDetailsModal" class="modal hidden">
    <div class="modal-content large">
      <header>
        <h3>Detalles de la Incidencia</h3>
        <button class="close-modal">&times;</button>
      </header>
      <div class="modal-body">
        <div class="details-map" id="incidentMap">[Mapa aquí]</div>
        <div class="details-info" id="incidentDetailsInfo"></div>
      </div>
      <footer>
        <button class="btn secondary close-modal">Cerrar</button>
      </footer>
    </div>
  </div>
</section>
